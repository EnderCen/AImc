openapi: 3.0.3
info:
  title: Há»‡ thá»‘ng HoÃ¡n Ä‘á»•i KhuÃ´n máº·t vÃ  Giá»ng nÃ³i
  description: |
    Há»‡ thá»‘ng API tÃ­ch há»£p nhiá»u tÃ­nh nÄƒng xá»­ lÃ½ AI:

    - ğŸ­ HoÃ¡n Ä‘á»•i khuÃ´n máº·t giá»¯a hai áº£nh
    - ğŸ—£ï¸ Chuyá»ƒn vÄƒn báº£n thÃ nh giá»ng nÃ³i
    - ğŸ–¼ï¸ Táº£i áº£nh vÃ  tá»‡p Ã¢m thanh
    - ğŸ¬ Táº¡o video hoáº¡t hÃ¬nh tá»« áº£nh vÃ  Ã¢m thanh
    - ğŸ§  Chuyá»ƒn Ä‘á»•i vÃ  quáº£n lÃ½ mÃ´ hÃ¬nh AI Ä‘á»™ng

    CÃ´ng nghá»‡ sá»­ dá»¥ng: vietTTS, Wav2Lip, InsightFace, OpenAI...
  version: 1.0.0
  contact:
    name: NhÃ³m phÃ¡t triá»ƒn AI
    email: support@example.com

servers:
  - url: http://localhost:55021
    description: Local development server

tags:
  - name: Xá»­ lÃ½ áº£nh
    description: CÃ¡c API liÃªn quan Ä‘áº¿n xá»­ lÃ½ vÃ  hoÃ¡n Ä‘á»•i khuÃ´n máº·t
  - name: Chuyá»ƒn Ä‘á»•i giá»ng nÃ³i
    description: CÃ¡c API liÃªn quan Ä‘áº¿n chuyá»ƒn vÄƒn báº£n thÃ nh giá»ng nÃ³i
  - name: Táº¡o video
    description: CÃ¡c API liÃªn quan Ä‘áº¿n táº¡o video hoáº¡t hÃ¬nh
  - name: Quáº£n lÃ½ mÃ´ hÃ¬nh
    description: CÃ¡c API liÃªn quan Ä‘áº¿n quáº£n lÃ½ vÃ  thay Ä‘á»•i mÃ´ hÃ¬nh AI
  - name: Táº£i tá»‡p
    description: CÃ¡c API liÃªn quan Ä‘áº¿n táº£i áº£nh vÃ  Ã¢m thanh
  - name: Táº¡o ká»‹ch báº£n
    description: CÃ¡c API liÃªn quan Ä‘áº¿n táº¡o ká»‹ch báº£n báº±ng AI

paths:
  /:
    get:
      summary: Trang chÃ­nh cá»§a á»©ng dá»¥ng
      description: |
        Tráº£ vá» trang HTML chÃ­nh cá»§a á»©ng dá»¥ng, Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m giao diá»‡n ngÆ°á»i dÃ¹ng máº·c Ä‘á»‹nh. Trang nÃ y thÆ°á»ng chá»©a cÃ¡c liÃªn káº¿t hoáº·c cÃ´ng cá»¥ Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c API cá»§a há»‡ thá»‘ng.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Truy cáº­p endpoint nÃ y Ä‘á»ƒ táº£i giao diá»‡n web cá»§a á»©ng dá»¥ng.
        - Äáº£m báº£o tá»‡p `main.html` tá»“n táº¡i táº¡i Ä‘Æ°á»ng dáº«n Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh (`~/Dev/roop/Web/main.html`).

        **LÆ°u Ã½**:
        - Náº¿u tá»‡p HTML khÃ´ng tá»“n táº¡i, API sáº½ tráº£ vá» mÃ£ lá»—i 404 vá»›i thÃ´ng bÃ¡o "Index file not found".
        - CÃ³ thá»ƒ tÃ¹y chá»‰nh giao diá»‡n báº±ng cÃ¡ch chá»‰nh sá»­a tá»‡p `main.html` hoáº·c thay Ä‘á»•i Ä‘Æ°á»ng dáº«n trong mÃ£ nguá»“n.
      operationId: root
      responses:
        '200':
          description: Trang HTML Ä‘Æ°á»£c táº£i thÃ nh cÃ´ng vÃ  tráº£ vá» dÆ°á»›i dáº¡ng ná»™i dung text/html.
          content:
            text/html:
              schema:
                type: string
                description: Ná»™i dung HTML cá»§a trang chÃ­nh, chá»©a giao diá»‡n ngÆ°á»i dÃ¹ng hoáº·c thÃ´ng tin vá» á»©ng dá»¥ng.
        '404':
          description: KhÃ´ng tÃ¬m tháº¥y tá»‡p `main.html` táº¡i Ä‘Æ°á»ng dáº«n Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh.
          content:
            text/html:
              schema:
                type: string
                description: ThÃ´ng bÃ¡o lá»—i HTML vá»›i ná»™i dung "Index file not found".

  /face_swap/:
    post:
      summary: HoÃ¡n Ä‘á»•i khuÃ´n máº·t giá»¯a hai hÃ¬nh áº£nh
      description: |
        Nháº­n hai hÃ¬nh áº£nh Ä‘áº§u vÃ o: áº£nh nguá»“n (chá»©a khuÃ´n máº·t cáº§n chuyá»ƒn) vÃ  áº£nh Ä‘Ã­ch (nÆ¡i khuÃ´n máº·t sáº½ Ä‘Æ°á»£c Ã¡p dá»¥ng). API sá»­ dá»¥ng mÃ´ hÃ¬nh AI (máº·c Ä‘á»‹nh lÃ  `inswapper_128.onnx`) Ä‘á»ƒ thá»±c hiá»‡n hoÃ¡n Ä‘á»•i khuÃ´n máº·t, táº¡o ra má»™t hÃ¬nh áº£nh má»›i vá»›i khuÃ´n máº·t tá»« áº£nh nguá»“n Ä‘Æ°á»£c tÃ­ch há»£p tá»± nhiÃªn vÃ o áº£nh Ä‘Ã­ch.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Táº£i lÃªn hai tá»‡p hÃ¬nh áº£nh (Ä‘á»‹nh dáº¡ng JPG, PNG, v.v.) thÃ´ng qua form-data.
        - API sáº½ xá»­ lÃ½ vÃ  lÆ°u káº¿t quáº£ vÃ o thÆ° má»¥c `static` vá»›i tÃªn `output.jpg`.
        - Kiá»ƒm tra pháº£n há»“i JSON Ä‘á»ƒ xÃ¡c nháº­n quÃ¡ trÃ¬nh hoÃ n táº¥t vÃ  láº¥y thÃ´ng tin vá» mÃ´ hÃ¬nh Ä‘Ã£ sá»­ dá»¥ng.

        **LÆ°u Ã½**:
        - Äáº£m báº£o cáº£ hai áº£nh Ä‘á»u chá»©a Ã­t nháº¥t má»™t khuÃ´n máº·t rÃµ rÃ ng Ä‘á»ƒ Ä‘áº¡t káº¿t quáº£ tá»‘t nháº¥t.
        - KÃ­ch thÆ°á»›c vÃ  cháº¥t lÆ°á»£ng áº£nh cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n káº¿t quáº£; nÃªn sá»­ dá»¥ng áº£nh cÃ³ Ä‘á»™ phÃ¢n giáº£i cao.
        - CÃ³ thá»ƒ thay Ä‘á»•i mÃ´ hÃ¬nh AI thÃ´ng qua endpoint `/change_model/` Ä‘á»ƒ tÃ¹y chá»‰nh hiá»‡u suáº¥t hoáº·c cháº¥t lÆ°á»£ng.
        - Xá»­ lÃ½ cÃ³ thá»ƒ máº¥t vÃ i giÃ¢y tÃ¹y thuá»™c vÃ o tÃ i nguyÃªn mÃ¡y tÃ­nh vÃ  kÃ­ch thÆ°á»›c áº£nh.
      operationId: face_swap
      tags:
        - Xá»­ lÃ½ áº£nh
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                source:
                  type: string
                  format: binary
                  description: áº¢nh chá»©a khuÃ´n máº·t cáº§n chuyá»ƒn
                target:
                  type: string
                  format: binary
                  description: áº¢nh chá»©a khuÃ´n máº·t Ä‘Ã­ch
              required:
                - source
                - target
      responses:
        '200':
          description: HoÃ¡n Ä‘á»•i khuÃ´n máº·t thÃ nh cÃ´ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Face swap completed!
                  model_used:
                    type: string
                    example: /path/to/model/inswapper_128.onnx
        '500':
          description: Lá»—i khi thá»±c hiá»‡n hoÃ¡n Ä‘á»•i khuÃ´n máº·t
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string

  /text_to_speech/:
    post:
      summary: Chuyá»ƒn vÄƒn báº£n thÃ nh giá»ng nÃ³i
      description: |
        Sá»­ dá»¥ng cÃ´ng cá»¥ vietTTS Ä‘á»ƒ chuyá»ƒn Ä‘á»•i vÄƒn báº£n Ä‘áº§u vÃ o thÃ nh tá»‡p Ã¢m thanh WAV vá»›i giá»ng nÃ³i tiáº¿ng Viá»‡t Ä‘Æ°á»£c chá»n. API há»— trá»£ nhiá»u giá»ng nÃ³i khÃ¡c nhau (Ä‘Æ°á»£c Ä‘Ã¡nh sá»‘ tá»« 1 Ä‘áº¿n 24), cho phÃ©p táº¡o ra Ã¢m thanh tá»± nhiÃªn vÃ  phÃ¹ há»£p vá»›i cÃ¡c á»©ng dá»¥ng nhÆ° lá»“ng tiáº¿ng, trá»£ lÃ½ áº£o, hoáº·c ná»™i dung giÃ¡o dá»¥c.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Cung cáº¥p vÄƒn báº£n cáº§n chuyá»ƒn Ä‘á»•i vÃ  mÃ£ sá»‘ giá»ng nÃ³i thÃ´ng qua form-data.
        - API sáº½ táº¡o tá»‡p Ã¢m thanh vÃ  lÆ°u vÃ o thÆ° má»¥c `static` vá»›i tÃªn `output.wav`.
        - Pháº£n há»“i JSON chá»©a Ä‘Æ°á»ng dáº«n Ä‘áº¿n tá»‡p Ã¢m thanh Ä‘áº§u ra.

        **LÆ°u Ã½**:
        - VÄƒn báº£n nÃªn ngáº¯n gá»n vÃ  khÃ´ng chá»©a kÃ½ tá»± Ä‘áº·c biá»‡t phá»©c táº¡p Ä‘á»ƒ Ä‘áº£m báº£o cháº¥t lÆ°á»£ng Ã¢m thanh.
        - Kiá»ƒm tra danh sÃ¡ch giá»ng nÃ³i há»£p lá»‡ (1-24) trong tÃ i liá»‡u cá»§a vietTTS trÆ°á»›c khi sá»­ dá»¥ng.
        - Tá»‡p WAV Ä‘áº§u ra cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trá»±c tiáº¿p hoáº·c chuyá»ƒn Ä‘á»•i sang Ä‘á»‹nh dáº¡ng khÃ¡c (nhÆ° MP3) náº¿u cáº§n.
        - Xá»­ lÃ½ nhanh nhÆ°ng cÃ³ thá»ƒ bá»‹ áº£nh hÆ°á»Ÿng náº¿u há»‡ thá»‘ng vietTTS chÆ°a Ä‘Æ°á»£c cÃ i Ä‘áº·t hoáº·c cáº¥u hÃ¬nh Ä‘Ãºng.
      operationId: text_to_speech
      tags:
        - Chuyá»ƒn Ä‘á»•i giá»ng nÃ³i
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                text:
                  type: string
                  description: Ná»™i dung vÄƒn báº£n cáº§n chuyá»ƒn thÃ nh giá»ng nÃ³i
                voice:
                  type: string
                  description: TÃªn giá»ng nÃ³i sáº½ sá»­ dá»¥ng (tá»« 1 Ä‘áº¿n 24)
              required:
                - text
                - voice
      responses:
        '200':
          description: Chuyá»ƒn Ä‘á»•i vÄƒn báº£n thÃ nh giá»ng nÃ³i thÃ nh cÃ´ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  output_audio:
                    type: string
                    example: /static/output.wav
        '500':
          description: Lá»—i khi thá»±c hiá»‡n chuyá»ƒn Ä‘á»•i
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string

  /animate_image/:
    post:
      summary: Táº¡o video hoáº¡t hÃ¬nh tá»« áº£nh vÃ  Ã¢m thanh
      description: |
        Táº¡o má»™t video hoáº¡t hÃ¬nh báº±ng cÃ¡ch káº¿t há»£p má»™t hÃ¬nh áº£nh tÄ©nh (`output.jpg`) vÃ  má»™t tá»‡p Ã¢m thanh (`output.wav`) sá»­ dá»¥ng cÃ´ng cá»¥ Wav2Lip. API Ä‘á»“ng bá»™ chuyá»ƒn Ä‘á»™ng khuÃ´n máº·t trong áº£nh vá»›i Ã¢m thanh, táº¡o hiá»‡u á»©ng nhÆ° nhÃ¢n váº­t trong áº£nh Ä‘ang nÃ³i, phÃ¹ há»£p cho cÃ¡c video quáº£ng cÃ¡o, giáº£i trÃ­, hoáº·c giÃ¡o dá»¥c.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Äáº£m báº£o tá»‡p `output.jpg` vÃ  `output.wav` Ä‘Ã£ tá»“n táº¡i trong thÆ° má»¥c `static` (cÃ³ thá»ƒ táº£i lÃªn Alt+Ctrl/Cmd+Enter Ä‘á»ƒ táº£i lÃªn qua cÃ¡c endpoint `/upload_image` vÃ  `/upload_voice`).
        - Gá»­i yÃªu cáº§u POST Ä‘áº¿n endpoint nÃ y Ä‘á»ƒ táº¡o video.
        - Video Ä‘áº§u ra Ä‘Æ°á»£c lÆ°u vÃ o thÆ° má»¥c `static/Videos` vá»›i tÃªn `output_web.mp4` (hoáº·c tÃªn khÃ¡c náº¿u tá»‡p Ä‘Ã£ tá»“n táº¡i).

        **LÆ°u Ã½**:
        - áº¢nh cáº§n chá»©a má»™t khuÃ´n máº·t rÃµ rÃ ng Ä‘á»ƒ Wav2Lip cÃ³ thá»ƒ Ä‘á»“ng bá»™ chÃ­nh xÃ¡c.
        - Tá»‡p Ã¢m thanh nÃªn cÃ³ cháº¥t lÆ°á»£ng tá»‘t vÃ  thá»i lÆ°á»£ng phÃ¹ há»£p Ä‘á»ƒ video trÃ´ng tá»± nhiÃªn.
        - API sá»­ dá»¥ng ffmpeg Ä‘á»ƒ mÃ£ hÃ³a video Ä‘áº§u ra thÃ nh Ä‘á»‹nh dáº¡ng MP4, vÃ¬ váº­y cáº§n cÃ i Ä‘áº·t ffmpeg trÃªn há»‡ thá»‘ng.
        - QuÃ¡ trÃ¬nh táº¡o video cÃ³ thá»ƒ máº¥t thá»i gian, Ä‘áº·c biá»‡t vá»›i áº£nh hoáº·c Ã¢m thanh dÃ i.
        - CÃ¡c video cÅ© trong thÆ° má»¥c `static` sáº½ bá»‹ xÃ³a trÆ°á»›c khi táº¡o video má»›i Ä‘á»ƒ trÃ¡nh xung Ä‘á»™t.
      operationId: animate_image
      tags:
        - Táº¡o video
      responses:
        '200':
          description: Táº¡o video thÃ nh cÃ´ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  output_video:
                    type: string
                    example: /static/Videos/output_web.mp4
        '400':
          description: Thiáº¿u tá»‡p Ä‘áº§u vÃ o (áº£nh hoáº·c Ã¢m thanh)
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
        '500':
          description: Lá»—i khi táº¡o video
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string

  /upload_image:
    post:
      summary: Táº£i áº£nh lÃªn
      description: |
        Táº£i má»™t tá»‡p hÃ¬nh áº£nh lÃªn há»‡ thá»‘ng vÃ  lÆ°u vÃ o thÆ° má»¥c `static` vá»›i tÃªn `output.jpg`. Tá»‡p nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m Ä‘áº§u vÃ o cho cÃ¡c quÃ¡ trÃ¬nh nhÆ° hoÃ¡n Ä‘á»•i khuÃ´n máº·t hoáº·c táº¡o video hoáº¡t hÃ¬nh.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Táº£i lÃªn má»™t tá»‡p hÃ¬nh áº£nh (JPG, PNG, v.v.) thÃ´ng qua form-data.
        - API sáº½ ghi Ä‘Ã¨ báº¥t ká»³ tá»‡p `output.jpg` hiá»‡n cÃ³ trong thÆ° má»¥c `static`.
        - Pháº£n há»“i JSON xÃ¡c nháº­n quÃ¡ trÃ¬nh táº£i lÃªn thÃ nh cÃ´ng.

        **LÆ°u Ã½**:
        - Äáº£m báº£o áº£nh cÃ³ Ä‘á»‹nh dáº¡ng há»£p lá»‡ vÃ  kÃ­ch thÆ°á»›c phÃ¹ há»£p Ä‘á»ƒ trÃ¡nh lá»—i xá»­ lÃ½.
        - Náº¿u Ä‘Ã£ cÃ³ tá»‡p `output.jpg`, nÃ³ sáº½ bá»‹ ghi Ä‘Ã¨ mÃ  khÃ´ng cÃ³ cáº£nh bÃ¡o.
        - áº¢nh táº£i lÃªn nÃªn chá»©a khuÃ´n máº·t rÃµ rÃ ng náº¿u dá»± Ä‘á»‹nh sá»­ dá»¥ng cho hoÃ¡n Ä‘á»•i khuÃ´n máº·t hoáº·c táº¡o video.
      operationId: upload_image
      tags:
        - Táº£i tá»‡p
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: áº¢nh cáº§n táº£i lÃªn
              required:
                - image
      responses:
        '200':
          description: Táº£i áº£nh thÃ nh cÃ´ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Táº£i áº£nh thÃ nh cÃ´ng
        '500':
          description: Lá»—i khi táº£i áº£nh
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string

  /upload_voice:
    post:
      summary: Táº£i tá»‡p Ã¢m thanh lÃªn
      description: |
        Táº£i má»™t tá»‡p Ã¢m thanh lÃªn há»‡ thá»‘ng vÃ  lÆ°u vÃ o thÆ° má»¥c `static` vá»›i tÃªn `output.wav`. Tá»‡p nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng lÃ m Ä‘áº§u vÃ o cho quÃ¡ trÃ¬nh táº¡o video hoáº¡t hÃ¬nh.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Táº£i lÃªn má»™t tá»‡p Ã¢m thanh (WAV, MP3, v.v.) thÃ´ng qua form-data.
        - API sáº½ ghi Ä‘Ã¨ báº¥t ká»³ tá»‡p `output.wav` hiá»‡n cÃ³ trong thÆ° má»¥c `static`.
        - Pháº£n há»“i JSON xÃ¡c nháº­n quÃ¡ trÃ¬nh táº£i lÃªn thÃ nh cÃ´ng.

        **LÆ°u Ã½**:
        - Äáº£m báº£o Ã¢m thanh cÃ³ Ä‘á»‹nh dáº¡ng há»£p lá»‡ vÃ  cháº¥t lÆ°á»£ng tá»‘t Ä‘á»ƒ Ä‘áº£m báº£o Ä‘á»“ng bá»™ chÃ­nh xÃ¡c trong video.
        - Náº¿u Ä‘Ã£ cÃ³ tá»‡p `output.wav`, nÃ³ sáº½ bá»‹ ghi Ä‘Ã¨ mÃ  khÃ´ng cÃ³ cáº£nh bÃ¡o.
        - Tá»‡p WAV lÃ  Ä‘á»‹nh dáº¡ng Æ°u tiÃªn Ä‘á»ƒ Ä‘áº£m báº£o tÆ°Æ¡ng thÃ­ch vá»›i Wav2Lip.
      operationId: upload_voice
      tags:
        - Táº£i tá»‡p
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                voice:
                  type: string
                  format: binary
                  description: Tá»‡p Ã¢m thanh cáº§n táº£i lÃªn
              required:
                - voice
      responses:
        '200':
          description: Táº£i Ã¢m thanh thÃ nh cÃ´ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Táº£i giá»ng nÃ³i thÃ nh cÃ´ng
        '500':
          description: Lá»—i khi táº£i Ã¢m thanh
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string

  /generate_script/:
    post:
      summary: Táº¡o ká»‹ch báº£n báº±ng AI
      description: |
        Sá»­ dá»¥ng mÃ´ hÃ¬nh AI (máº·c Ä‘á»‹nh lÃ  Gemini) Ä‘á»ƒ táº¡o ká»‹ch báº£n hoáº·c ná»™i dung vÄƒn báº£n tá»« vÄƒn báº£n Ä‘áº§u vÃ o. API há»— trá»£ tÃ¹y chá»‰nh nhÃ  cung cáº¥p AI, khÃ³a API, vÃ  tÃªn mÃ´ hÃ¬nh, cho phÃ©p táº¡o ná»™i dung sÃ¡ng táº¡o nhÆ° ká»‹ch báº£n phim, bÃ i quáº£ng cÃ¡o, hoáº·c ná»™i dung máº¡ng xÃ£ há»™i.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Cung cáº¥p vÄƒn báº£n Ä‘áº§u vÃ o, nhÃ  cung cáº¥p AI, khÃ³a API, vÃ  tÃªn mÃ´ hÃ¬nh thÃ´ng qua form-data.
        - API sáº½ gá»i script `chatbox.py` Ä‘á»ƒ xá»­ lÃ½ yÃªu cáº§u vÃ  tráº£ vá» ná»™i dung Ä‘Æ°á»£c táº¡o trong pháº£n há»“i JSON.
        - Kiá»ƒm tra pháº£n há»“i Ä‘á»ƒ láº¥y ná»™i dung ká»‹ch báº£n Ä‘Ã£ Ä‘Æ°á»£c táº¡o.

        **LÆ°u Ã½**:
        - VÄƒn báº£n Ä‘áº§u vÃ o nÃªn rÃµ rÃ ng vÃ  cá»¥ thá»ƒ Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c káº¿t quáº£ tá»‘t nháº¥t.
        - KhÃ³a API pháº£i há»£p lá»‡ vÃ  cÃ³ Ä‘á»§ háº¡n má»©c Ä‘á»ƒ xá»­ lÃ½ yÃªu cáº§u.
        - Há»— trá»£ cÃ¡c nhÃ  cung cáº¥p AI khÃ¡c nhau, nhÆ°ng Gemini lÃ  máº·c Ä‘á»‹nh.
        - Script `chatbox.py` pháº£i Ä‘Æ°á»£c cÃ i Ä‘áº·t vÃ  cáº¥u hÃ¬nh Ä‘Ãºng trÃªn há»‡ thá»‘ng.
      operationId: generate_script
      tags:
        - Táº¡o ká»‹ch báº£n
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                text:
                  type: string
                  description: VÄƒn báº£n Ä‘áº§u vÃ o Ä‘á»ƒ táº¡o ká»‹ch báº£n
                ai_provider:
                  type: string
                  default: gemini
                  description: NhÃ  cung cáº¥p AI (máº·c Ä‘á»‹nh lÃ  gemini)
                api_key:
                  type: string
                  description: KhÃ³a API cá»§a nhÃ  cung cáº¥p AI
                model_name:
                  type: string
                  default: gemini-1.5-pro
                  description: TÃªn mÃ´ hÃ¬nh AI (máº·c Ä‘á»‹nh lÃ  gemini-1.5-pro)
              required:
                - text
                - api_key
      responses:
        '200':
          description: Táº¡o ká»‹ch báº£n thÃ nh cÃ´ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  script_output:
                    type: string
                    description: Káº¿t quáº£ ká»‹ch báº£n Ä‘Æ°á»£c táº¡o
        '500':
          description: Lá»—i khi táº¡o ká»‹ch báº£n
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string

  /change_model/:
    post:
      summary: Thay Ä‘á»•i mÃ´ hÃ¬nh AI
      description: |
        Táº£i lÃªn má»™t tá»‡p mÃ´ hÃ¬nh AI má»›i (thÆ°á»ng lÃ  tá»‡p ONNX hoáº·c tÆ°Æ¡ng tá»±) vÃ  kÃ­ch hoáº¡t nÃ³ Ä‘á»ƒ sá»­ dá»¥ng trong quÃ¡ trÃ¬nh hoÃ¡n Ä‘á»•i khuÃ´n máº·t. API lÆ°u mÃ´ hÃ¬nh vÃ o thÆ° má»¥c `models`, cáº­p nháº­t cáº¥u hÃ¬nh, vÃ  táº£i mÃ´ hÃ¬nh vÃ o bá»™ nhá»› Ä‘á»ƒ xá»­ lÃ½ cÃ¡c yÃªu cáº§u tiáº¿p theo.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Táº£i lÃªn tá»‡p mÃ´ hÃ¬nh thÃ´ng qua form-data.
        - API sáº½ kiá»ƒm tra tá»‡p, lÆ°u vá»›i tÃªn duy nháº¥t (trÃ¡nh ghi Ä‘Ã¨), vÃ  kÃ­ch hoáº¡t mÃ´ hÃ¬nh.
        - Pháº£n há»“i JSON chá»©a thÃ´ng tin vá» mÃ´ hÃ¬nh Ä‘Ã£ táº£i lÃªn, bao gá»“m tÃªn, Ä‘Æ°á»ng dáº«n, vÃ  tráº¡ng thÃ¡i.

        **LÆ°u Ã½**:
        - Tá»‡p mÃ´ hÃ¬nh pháº£i tÆ°Æ¡ng thÃ­ch vá»›i há»‡ thá»‘ng hoÃ¡n Ä‘á»•i khuÃ´n máº·t (InsightFace hoáº·c tÆ°Æ¡ng tá»±).
        - Äáº£m báº£o thÆ° má»¥c `models` cÃ³ quyá»n ghi Ä‘á»ƒ lÆ°u tá»‡p.
        - Náº¿u tá»‡p Ä‘Ã£ tá»“n táº¡i, API sáº½ tá»± Ä‘á»™ng thÃªm háº­u tá»‘ sá»‘ Ä‘á»ƒ trÃ¡nh xung Ä‘á»™t (vÃ­ dá»¥: `model_1.onnx`).
        - KÃ­ch hoáº¡t mÃ´ hÃ¬nh cÃ³ thá»ƒ yÃªu cáº§u tÃ i nguyÃªn Ä‘Ã¡ng ká»ƒ, Ä‘áº·c biá»‡t vá»›i cÃ¡c mÃ´ hÃ¬nh lá»›n.
        - Náº¿u cÃ³ lá»—i, API sáº½ xÃ³a tá»‡p Ä‘Ã£ táº£i lÃªn Ä‘á»ƒ trÃ¡nh há»ng há»‡ thá»‘ng.
      operationId: change_model
      tags:
        - Quáº£n lÃ½ mÃ´ hÃ¬nh
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                model_file:
                  type: string
                  format: binary
                  description: Tá»‡p mÃ´ hÃ¬nh AI cáº§n táº£i lÃªn
              required:
                - model_file
      responses:
        '200':
          description: Thay Ä‘á»•i mÃ´ hÃ¬nh thÃ nh cÃ´ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  model_name:
                    type: string
                    description: TÃªn cá»§a mÃ´ hÃ¬nh
                  model_path:
                    type: string
                    description: ÄÆ°á»ng dáº«n Ä‘áº§y Ä‘á»§ Ä‘áº¿n mÃ´ hÃ¬nh
                  relative_path:
                    type: string
                    description: ÄÆ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i cá»§a mÃ´ hÃ¬nh
        '400':
          description: Thiáº¿u tá»‡p mÃ´ hÃ¬nh
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
        '500':
          description: Lá»—i khi thay Ä‘á»•i mÃ´ hÃ¬nh
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string

  /models/{model_path:path}:
    get:
      summary: Phá»¥c vá»¥ tá»‡p mÃ´ hÃ¬nh
      description: |
        Truy xuáº¥t vÃ  tráº£ vá» má»™t tá»‡p mÃ´ hÃ¬nh tá»« thÆ° má»¥c `models` dá»±a trÃªn Ä‘Æ°á»ng dáº«n Ä‘Æ°á»£c cung cáº¥p. API Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº£i xuá»‘ng hoáº·c kiá»ƒm tra cÃ¡c mÃ´ hÃ¬nh Ä‘Ã£ Ä‘Æ°á»£c táº£i lÃªn trÆ°á»›c Ä‘Ã³.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Gá»­i yÃªu cáº§u GET vá»›i Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº¿n tá»‡p mÃ´ hÃ¬nh (vÃ­ dá»¥: `models/new_model.onnx`).
        - API sáº½ tráº£ vá» tá»‡p dÆ°á»›i dáº¡ng luá»“ng nhá»‹ phÃ¢n náº¿u tá»‡p tá»“n táº¡i.
        - Sá»­ dá»¥ng Ä‘Æ°á»ng dáº«n tá»« pháº£n há»“i cá»§a endpoint `/change_model/` Ä‘á»ƒ truy cáº­p Ä‘Ãºng tá»‡p.

        **LÆ°u Ã½**:
        - ÄÆ°á»ng dáº«n pháº£i chÃ­nh xÃ¡c vÃ  tá»‡p pháº£i tá»“n táº¡i trong thÆ° má»¥c `models`.
        - API tráº£ vá» tá»‡p dÆ°á»›i dáº¡ng octet-stream, phÃ¹ há»£p Ä‘á»ƒ táº£i xuá»‘ng hoáº·c sá»­ dá»¥ng trá»±c tiáº¿p.
        - Äáº£m báº£o quyá»n truy cáº­p vÃ o thÆ° má»¥c `models` Ä‘á»ƒ trÃ¡nh lá»—i.
      operationId: serve_model
      tags:
        - Quáº£n lÃ½ mÃ´ hÃ¬nh
      parameters:
        - name: model_path
          in: path
          required: true
          schema:
            type: string
          description: ÄÆ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº¿n tá»‡p mÃ´ hÃ¬nh
      responses:
        '200':
          description: Tá»‡p mÃ´ hÃ¬nh Ä‘Æ°á»£c tráº£ vá» thÃ nh cÃ´ng
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        '404':
          description: KhÃ´ng tÃ¬m tháº¥y tá»‡p mÃ´ hÃ¬nh
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string

  /activate_model/:
    post:
      summary: KÃ­ch hoáº¡t mÃ´ hÃ¬nh AI
      description: |
        KÃ­ch hoáº¡t má»™t mÃ´ hÃ¬nh AI Ä‘Ã£ Ä‘Æ°á»£c táº£i lÃªn trÆ°á»›c Ä‘Ã³ (náº±m trong thÆ° má»¥c `models`) Ä‘á»ƒ sá»­ dá»¥ng cho cÃ¡c yÃªu cáº§u hoÃ¡n Ä‘á»•i khuÃ´n máº·t. API cáº­p nháº­t cáº¥u hÃ¬nh vÃ  táº£i mÃ´ hÃ¬nh vÃ o bá»™ nhá»› Ä‘á»ƒ xá»­ lÃ½.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Gá»­i yÃªu cáº§u POST vá»›i JSON chá»©a `model_path` (Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº¿n tá»‡p mÃ´ hÃ¬nh).
        - API kiá»ƒm tra sá»± tá»“n táº¡i cá»§a tá»‡p, kÃ­ch hoáº¡t mÃ´ hÃ¬nh, vÃ  cáº­p nháº­t tá»‡p cáº¥u hÃ¬nh (`model_config.json`).
        - Pháº£n há»“i JSON xÃ¡c nháº­n mÃ´ hÃ¬nh Ä‘Ã£ Ä‘Æ°á»£c kÃ­ch hoáº¡t vÃ  cung cáº¥p thÃ´ng tin chi tiáº¿t.

        **LÆ°u Ã½**:
        - ÄÆ°á»ng dáº«n pháº£i trá» Ä‘áº¿n tá»‡p mÃ´ hÃ¬nh há»£p lá»‡ trong thÆ° má»¥c `models`.
        - KÃ­ch hoáº¡t mÃ´ hÃ¬nh cÃ³ thá»ƒ yÃªu cáº§u tÃ i nguyÃªn Ä‘Ã¡ng ká»ƒ, Ä‘áº·c biá»‡t vá»›i cÃ¡c mÃ´ hÃ¬nh lá»›n.
        - Äáº£m báº£o thÆ° má»¥c chá»©a tá»‡p cáº¥u hÃ¬nh cÃ³ quyá»n ghi Ä‘á»ƒ lÆ°u cáº­p nháº­t.
        - Náº¿u mÃ´ hÃ¬nh khÃ´ng há»£p lá»‡ hoáº·c khÃ´ng tá»“n táº¡i, API sáº½ tráº£ vá» lá»—i tÆ°Æ¡ng á»©ng.
      operationId: activate_model
      tags:
        - Quáº£n lÃ½ mÃ´ hÃ¬nh
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                model_path:
                  type: string
                  description: ÄÆ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº¿n tá»‡p mÃ´ hÃ¬nh
              required:
                - model_path
      responses:
        '200':
          description: KÃ­ch hoáº¡t mÃ´ hÃ¬nh thÃ nh cÃ´ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: KÃ­ch hoáº¡t mÃ´ hÃ¬nh thÃ nh cÃ´ng
                  model_path:
                    type: string
                    description: ÄÆ°á»ng dáº«n Ä‘áº§y Ä‘á»§ Ä‘áº¿n mÃ´ hÃ¬nh
        '400':
          description: Thiáº¿u model_path
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
        '404':
          description: KhÃ´ng tÃ¬m tháº¥y tá»‡p mÃ´ hÃ¬nh
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
        '500':
          description: Lá»—i khi kÃ­ch hoáº¡t mÃ´ hÃ¬nh
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string

  /delete_model/:
    post:
      summary: XÃ³a mÃ´ hÃ¬nh AI
      description: |
        XÃ³a má»™t mÃ´ hÃ¬nh AI khá»i thÆ° má»¥c `models` dá»±a trÃªn Ä‘Æ°á»ng dáº«n Ä‘Æ°á»£c cung cáº¥p. Náº¿u mÃ´ hÃ¬nh Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng, API sáº½ chuyá»ƒn vá» mÃ´ hÃ¬nh máº·c Ä‘á»‹nh (`inswapper_128.onnx`) vÃ  cáº­p nháº­t cáº¥u hÃ¬nh.

        **CÃ¡ch sá»­ dá»¥ng**:
        - Gá»­i yÃªu cáº§u POST vá»›i JSON chá»©a `model_path` (Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº¿n tá»‡p mÃ´ hÃ¬nh).
        - API kiá»ƒm tra sá»± tá»“n táº¡i cá»§a tá»‡p, xÃ³a nÃ³, vÃ  thá»±c hiá»‡n cÃ¡c bÆ°á»›c cáº§n thiáº¿t náº¿u mÃ´ hÃ¬nh Ä‘ang Ä‘Æ°á»£c kÃ­ch hoáº¡t.
        - Pháº£n há»“i JSON xÃ¡c nháº­n mÃ´ hÃ¬nh Ä‘Ã£ Ä‘Æ°á»£c xÃ³a vÃ  cung cáº¥p thÃ´ng tin chi tiáº¿t.

        **LÆ°u Ã½**:
        - ÄÆ°á»ng dáº«n pháº£i trá» Ä‘áº¿n tá»‡p mÃ´ hÃ¬nh há»£p lá»‡ trong thÆ° má»¥c `models`.
        - Náº¿u mÃ´ hÃ¬nh Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng, API sáº½ tá»± Ä‘á»™ng táº£i mÃ´ hÃ¬nh máº·c Ä‘á»‹nh Ä‘á»ƒ Ä‘áº£m báº£o há»‡ thá»‘ng hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng.
        - Äáº£m báº£o thÆ° má»¥c `models` vÃ  tá»‡p cáº¥u hÃ¬nh cÃ³ quyá»n ghi Ä‘á»ƒ thá»±c hiá»‡n xÃ³a vÃ  cáº­p nháº­t.
        - Náº¿u mÃ´ hÃ¬nh khÃ´ng tá»“n táº¡i, API sáº½ tráº£ vá» lá»—i 404.
      operationId: delete_model
      tags:
        - Quáº£n lÃ½ mÃ´ hÃ¬nh
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                model_path:
                  type: string
                  description: ÄÆ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº¿n tá»‡p mÃ´ hÃ¬nh
              required:
                - model_path
      responses:
        '200':
          description: XÃ³a mÃ´ hÃ¬nh thÃ nh cÃ´ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: XÃ³a mÃ´ hÃ¬nh thÃ nh cÃ´ng
                  model_path:
                    type: string
                    description: ÄÆ°á»ng dáº«n Ä‘áº§y Ä‘á»§ Ä‘áº¿n mÃ´ hÃ¬nh Ä‘Ã£ xÃ³a
        '400':
          description: Thiáº¿u model_path
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
        '404':
          description: KhÃ´ng tÃ¬m tháº¥y tá»‡p mÃ´ hÃ¬nh
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
        '500':
          description: Lá»—i khi xÃ³a mÃ´ hÃ¬nh
          content:
            application/json:
              schema:
                type: object
                properties:
                  detail:
                    type: string
                    
  /face_swap_ai/:
    post:
      summary: HoÃ¡n Ä‘á»•i khuÃ´n máº·t giá»¯a hai hÃ¬nh áº£nh (phiÃªn báº£n cáº£i tiáº¿n)
      description: Nháº­n hai hÃ¬nh áº£nh Ä‘áº§u vÃ o (áº£nh nguá»“n vÃ  áº£nh Ä‘Ã­ch), thá»±c hiá»‡n hoÃ¡n Ä‘á»•i khuÃ´n máº·t tá»« áº£nh nguá»“n sang áº£nh Ä‘Ã­ch, lÆ°u káº¿t quáº£ vÃ o thÆ° má»¥c static/Images vá»›i tÃªn file khÃ´ng ghi Ä‘Ã¨.
      operationId: face_swap_ai
      tags:
        - Xá»­ lÃ½ áº£nh
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                source:
                  type: string
                  format: binary
                  description: áº¢nh chá»©a khuÃ´n máº·t cáº§n chuyá»ƒn
                target:
                  type: string
                  format: binary
                  description: áº¢nh chá»©a khuÃ´n máº·t Ä‘Ã­ch
              required:
                - source
                - target
      responses:
        '200':
          description: HoÃ¡n Ä‘á»•i khuÃ´n máº·t thÃ nh cÃ´ng
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Face swap completed!
                  model_used:
                    type: string
                    example: /path/to/model/inswapper_128.onnx
                  output_image:
                    type: string
                    example: /static/Images/output.jpg
                    description: ÄÆ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº¿n áº£nh káº¿t quáº£
        '500':
          description: Lá»—i khi thá»±c hiá»‡n hoÃ¡n Ä‘á»•i khuÃ´n máº·t
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: ThÃ´ng tin chi tiáº¿t vá» lá»—i
